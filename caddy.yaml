logging:
  logs:
    default:
      level: INFO
storage:
  "module": "file_system"
  "root": "/data"
apps:
  tls:
    certificates:
      automate:
        - livekit-vyom.indusnettechnologies.com
        - turn-livekit-vyom.indusnettechnologies.com
        - whip-livekit-vyom.indusnettechnologies.com
  http:
    servers:
      redirect:
        listen: [":80"]
        routes:
          - handle:
              - handler: static_response
                headers:
                  Location: ["https://{http.request.host}{http.request.uri}"]
                status_code: 301
  layer4:
    servers:
      main:
        listen: [":443"]
        routes:
          - match:
            - tls:
                sni:
                  - "turn-livekit-vyom.indusnettechnologies.com"
            handle:
              - handler: tls
              - handler: proxy
                upstreams:
                  - dial: ["localhost:5349"]
          - match:
              - tls:
                  sni:
                    - "livekit-vyom.indusnettechnologies.com"
            handle:
              - handler: tls
                connection_policies:
                  - alpn: ["http/1.1"]
              - handler: proxy
                upstreams:
                  - dial: ["localhost:7880"]
          - match:
              - tls:
                  sni:
                    - "whip-livekit-vyom.indusnettechnologies.com"
            handle:
              - handler: tls
                connection_policies:
                  - alpn: ["http/1.1"]
              - handler: proxy
                upstreams:
                  - dial: ["localhost:8080"]
